kubectl get nodes
kubectl get nodes -o wide
kubectl get nodes -o json
kubectl get nodes -o yaml

kubectl describe nodes
kubectl describe nodes master
kubectl describe nodes worker1

#Kubernetes Objects list (Search google)

kubectl api-resources

kubectl get namespaces
kubectl get ns
kubectl create ns production
kubectl describe namespaces production
kubectl delete namespaces production


kubectl get pods
kubectl get pods -o wide
kubectl get pods -A
kubectl get pods -n kube-system
kubectl get pods -n kube-flannel

#Live watch pods
watch kubectl get pods
watch kubectl get pods <container name>
kubectl get pods -w



kubectl run -h
kubectl run pod1 --image nginx
curl 10.244.1.14
curl http://10.244.1.14
kubectl describe pods pod1
kubectl logs pod/pod1


kubectl delete pods pod1                  # Delete spacefic pod
kubectl delete pods --all                 # All pods delete
kubectl delete pods --all --force         # Force All pods delete

kubectl create namespace ns1
kubectl run pod1 --image nginx --namespace ns1
kubectl get pods -n ns1
kubectl delete pods -n ns1 pod1
kubectl delete pods -n ns1 --all


kubectl get pods -n kube-system | wc -l


kubectl explain namespace
kubectl explain pod
kubectl explain replicaset


#Create a pod using yaml
 kubectl apply -f single.yaml --dry-run
 kubectl apply -f single.yaml

 kubectl get pods
 kubectl run pod2 --image nginx --dry-run=client -o yaml
# Output
----------------------------
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: pod2
  name: pod2
spec:
  containers:
  - image: nginx
    name: pod2
    resources: {}
  dnsPolicy: ClusterFirst
  restartPolicy: Always
status: {}
------------------------------

 kubectl exec -it multicontainer /bin/bash   #login container
 kubectl exec -it multicontainer /bin/sh     #login container


#Deploy Replicas
 kubectl create deployment demodep1 --image nginx --replicas 10
 kubectl delete deployments.apps <deployment name>
 kubectl scale deployment <deployment name> --replicas 0                    #Scale out 
 kubectl scale deployment <deployment name> --replicas 10                   #Scale In


#Edit pods
 kubectl edit pod <pod name>   #Change only image but not change name or not add container image.but output yaml file provide
 kubectl describe pod pod1 | grep -i image
 kubectl describe pod pod1 | more 
 kubectl set image pods/pod1 pod1=nginx


#kubectl apply/create/replace 
 kubectl create -f <yaml file>             # newcreate resources
 kubectl apply -f <yaml file>              # changeable yaml file info update pod
 kubectl replace -f <yaml file>            # replace pod
 kubectl replace -f <yaml file> --force    # delete+new create 


#Login container shells or run command
 kubectl exec pods/pod1 -- pwd
 kubectl exec pods/pod1 -- date
 kubectl exec pods/pod1 -- hostname
 kubectl exec pods/<podname> -- "command"
 kubectl exec pods/<podname> -c <containername> -- "command"
 #Example
   kubectl exec -it pods/pod1 -- /bin/bash
   kubectl exec -it pods/pod1 -- /bin/sh 

#copy contents from host to pod
 kubectl cp <source> <pod-name>:<destination>
 kubectl cp <source> <pod-name>:<destination> -c <containername>
 #Example
  kubectl cp index.html multicontainer:/usr/share/nginx/html/
  kubectl cp index.html multicontainer:/tmp -c redis


#copy contents from pod to host
 kubectl cp <source> <pod-name>:<sourcefilewithpath> <destination-must-with-file-name>
 kubectl cp <source> <pod-name>:<sourcefilewithpath> <destination-must-with-file-name> -c <containername>
#Example
 kubectl cp -n default multicontainer:/usr/share/nginx/html/index.html /tmp/abc
 kubectl cp -n default multicontainer:/usr/share/nginx/html/index.html ./index.html
 kubectl cp multicontainer:/usr/share/nginx/html/index.html ./index.html
 kubectl cp multicontainer:/usr/share/nginx/html/index.html ./index.html -c doc2
 kubectl cp dhaka/ multicontainer:/tmp   #Directoy copy


#Logs 
 kubectl logs pods <podname>
 kubectl logs pods <podname> -c <containername>
 kubectl logs pods <podname -c <containername> --since=1h
 kubectl logs pods <podname -c <containername> --tail 10
 kubectl logs pods <podname> -c <containername> -f


#Pod Restart Policy 
 #type of restart policy
 kubectl run always --imgae ubuntu #Default policy always
 kubectl run never --image ubuntu --restart Never  #No Restart 
 kubectl run onfailure --image ubuntu --restart OnFailure   #Just failed time restart this pods
 kubectl get pods always -o yaml | grep -i restart

  
#Side  car container

#init container
apiVersion: v1
kind: Pod
metadata:
 name: pod1
spec:
containers:
 - name: container1
   image: nginx
initContainers:
 - name: containers2
   image: redis


--------------------------

apiVersion: v1
kind: Pod
metadata:
 name: pod1
spec:
containers:
 - name: container1
   image: nginx
initContainers:
 - name: containers2
   image: ubuntu



#Service + Label in Kubernetes
 #type of Service
  1. ClusterIP
  2. NodePort
  3. Loadbalancer
  4. ExternalName

#ClusterIP 
kubectl get service #Build in service
kubectl create service clusterip svc1 --tcp 80
kubectl describe service <service name>
kubectl edit service <service name>  #Edit Label
kubectl get service --show-labels    # Show label
kubectl edit pod <pod name>          #Edit Pod
kubectl label pod webapp2 app=svc1   #Set label
kubectl label --overwrite pods <pod_name> key=new_value #overwrite label
kubectl create service clusterip --clusterip 10.97.101.55 --tcp 81:80 svc2

kubectl run pod1 --image nginx --port 80 --expose   #expose (create service and label set)
kubectl expose pod web1 --port 80
kubectl expose pod web1 --port 81 --target-port 80
kubectl get service web1 -o yaml
kubectl run web3 --image nginx --labels run=web1
kubectl create service clusterip svc1 --tcp 80 -o yaml --dry-run=clientm > svc1.yaml



#NodePort



#Show Network
iptables -t nat -L  #Show ip tables
iptables -t nat -nL
iptables -t nat -nL | grep -i 80








